GUI:
    updateRate: 10

# Config for the vehicle
# Each module is a seperate system that needs to be started up
Subsystems:    
    VisionSystem:
        type: VisionSystem
        depends_on: ["EventHub", "Vehicle"]
        
#       RedLightDetector:       
#           intialMinPixels: 400
#           foundMinPixelScale: 0.85
#           lostMinPixelScale: 0.75
#           # About 20% of the total pixels
#           almostHitPixels: 61440.0
        
        # Recording Settings
        maxRecordRate: 8 # Hz
        #forwardFile: forward.avi
        forwardPort: 50001
    

    RemoteController:
        type: RemoteController
        depends_on: ["Controller"]
        update_interval: -1

    EventHub:
        type: EventHub

    # Queues events from background threads so they can be executed in python
    QueuedEventHub:
        depends_on: ["EventHub"]
        type: QueuedEventHub

    # Exectures Motions
    MotionManager:
        type: MotionManager
        depends_on: ["Vehicle", "Controller", "QueuedEventHub", "EventHub"]

    # Handles Timers
    TimerManager:
        type: TimerManager
        depends_on: ["EventHub"]

    StateMachine:
        type: StateMachine
        depends_on: ["EventHub", "QueuedEventHub", "Controller",
                     "MotionManager", "TimerManager", "VisionSystem"]

    # Object that creates the vehicle interface
    Vehicle:
        # The full name of the class to instantiate in this case its a wrapper
        # for the base C++ vehicle
        type: Vehicle
        # Time between updates in ms
        update_interval: 25
     
        depends_on: ["EventHub"]

        # Pressure tranducer calibration 
        depthCalibSlope: 33.01
        depthCalibIntercept: 94

        # The list of devices to create for the vehicle
        Devices:
            # NOTE: All current numbers here are BS and need to updated

            # This entry creates a thruster
            StarboardThruster:
                # serial: 147
                type: Thruster
                update_interval: 100

                # String representing the address of the thruster
                address: 4
                # Number determined by testing
                calibration_factor: 0.3652
                # Number used to flip thruster forces (if thruster is reversed
                # on the vehicle)
                direction: -1

            PortThruster:
                # serial: 149
                type: Thruster
                address: 3
                calibration_factor: 0.4146
                direction: -1

            ForeThruster:
                type: Thruster
                # serial: 146
                address: 2
                calibration_factor: 0.4368
                direction: 1

            AftThruster:
                # Serial 148
                type: Thruster
                address: 1
                calibration_factor: 0.3612
                direction: -1

            IMU:
                type: IMU
                update_interval: 5
                # These are in VEHICLE FRAME
                magXBias: -0.229488
                magYBias: 0.270406
                magZBias: 0.158325
                localMagneticPitch: 60

    Controller:
        depends_on: ["Vehicle", "EventHub"]
        type: BWPDController
        update_interval: 10

        angularPGain: 10
        angularDGain: 1
        speedPGain: 3
        # Should not be negative
        depthPGain: 20


        desiredSpeed: 0
        desiredDepth: 0
        desiredQuaternion: [0, 0, 0, 1]

