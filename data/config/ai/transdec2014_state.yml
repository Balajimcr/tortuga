# Full Course
ram.ai.new.mainState.Body:
  states:
    start:
      type: Start
    gate:
      type: GateTask
      init:
        taskDepth: 4
        forwardDistance: 12
        success: pipeAlignBuoyCP
        failure: end
        duration: 90
    uprights:
      type: UprightsTask
      init:
          taskDepth: 8
          returnDepth: 4
          uprightsSearchDistance: 7
          rectWidth: 1
          rectLength: 2.5
          success: gotoUprightsPipe
          failure: gotoUprightsPipe
          duration: 180
    bins:
      type: BinsTask
      init:
          binSymbol1: 1
          binSymbol2: 2
          searchDist: 10
          hoverTime: 15
          success: torps
          failure: gotoTorpBinPipe
          duration: 210
    torps:
      type: TorpedoTask
      init:
          configNode: {}
          success: gotoTorpBinPipe
          failure: gotoTorpBinPipe
          duration: 300
    sonarPinger1:
      type: SonarNavigationTask
      init:
          success: sonarManip
          failure: surface
          startDepth: 6
          shortDepth: 8
          endDepth: 4
          duration: 100000000
    sonarManip:
      type: SonarManipTask
      init:
          siteSearchDistance: 3
          boxX: 1.5
          boxY: 1.5
          success: pogo
          failure: sonarPinger4
          duration: 300
    pogo:
      type: PogoTask
      init: 
      	pogoHeight: 1.2
        pogoWidth: 1.2
        pogoShift: .15
        pogoShiftV: .45
        attackHeight: 11.9
        success: sonarPinger2
        failure: sonarPinger4
        duration: 210
    sonarPinger2:
      type: SonarNavigationTask
      init:
        success: releaseOne
        failure: surface
        startDepth: 6
        shortDepth: 8
        endDepth: 8
        duration: 180
    releaseOne:
        type: ManipReleaseTask
        init:
            release: 1
            wait: 7
    sonarPinger3:
      type: SonarNavigationTask
      init:
          success: releaseOther
          failure: surface
          startDepth: 6
          shortDepth: 8
          endDepth: 8
          duration: 180
    releaseOther:
        type: ManipReleaseTask
        init:
            release: 2
            wait: 7
    sonarPinger4:
      type: SonarNavigationTask
      init:
          success: releaseAll
          failure: surface
          startDepth: 6
          shortDepth: 8
          endDepth: 8
          duration: 90
    releaseAll:
        type: ManipReleaseTask
        init:
            release: 0
            wait: 7
    surface:
        type: DiveTo
        init:
            depth: 0

    # PIPES
    pipeAlignBuoyCP:
      type: PipeAlign
      init:
          searchDist: 3
    pipeAlignUprightsCP:
      type: PipeAlign
      init:
          searchDist: 3
    pipeAlignBuoyNCP:
      type: PipeAlign
      init:
          searchDist: 7
    pipeAlignUprightsNCP:
      type: PipeAlign
      init:
          searchDist: 7

    #Pipe1 with checkpoints
    storeBuoyPipe:
      type: PipeCheckpoint
      init:
          checkpoint: pipe1
          nextCheckpoint: pipe1next
          distanceToNextPipe: 11
    gotoUprightsPipe:
      type: GotoPipe
      init:
          prevCheckpoint: pipe1
          nextCheckpoint: pipe1next
    
    #Pipe2 with checkpoints
    storeUprightsPipe:
      type: PipeCheckpoint
      init:
          checkpoint: pipe2
          nextCheckpoint: pipe2next
          distanceToNextpipe: 15
          gotoTorpBinPipe:
      type: GotoPipe
      init:
          prevCheckpoint: pipe2
          nextCheckpoint: pipe2next
    end:
      type: End
      
  transitions:
    - [start, next, gate]
    - [pipeAlignBuoyCP, next, uprights]
    - [gotoUprightsPipe, next, pipeAlignUprightsCP]
    - [pipeAlignUprightsCP, next,bins]
    - [gotoTorpBinPipe, next, sonarPinger1]
    - [releaseOne, next, sonarPinger3]
    - [releaseOther, next, surface]
    - [releaseAll, next, surface]
    - [surface, next, end]

